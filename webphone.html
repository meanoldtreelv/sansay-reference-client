<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Sansay WebRTC Solutions</title>
    <link rel="stylesheet" href="css/demo.css" type="text/css"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.2/js/bootstrap.min.js"></script>
    <script>
        $(function() {
                $(".navbar-fixed-top").load("navbar.html", function() {
                     //   $(".navbar-fixed-top a[href='webphone.html']").parent().addClass("active");
                });
                $(".footer").load("footer.html");
        });
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" type="text/css"/>
  </head>

  <body>
    <nav class="sansay-color navbar navbar-default navbar-fixed-top" style="z-index: 1031">
    </nav>

    <div id='my-container' class='container' style="top: 52px; position: fixed; width: 100%; z-index: 1030">
    </div>

    <div class='container' style='margin-top: 50px;'>
      <div class="row">
        <div class="col-md-12">
          <div class="page-header">
            <div class="row">
              <div class="col-md-3">
                <h1 class="sansay-heading-color">Webphone</h1>
              </div>
              <div id="login-msg" class="col-md-6 alert alert-info" style="margin: 12px 10px 5px 10px;">
                Please login with user ID and password to activate the webphone demo below
              </div>
            </div>
            <div class="row">
              <div class="col-md-3">
               <a href="downloads/webphone-sdk.zip"><i class="fa fa-download"></i> Download SDK</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-2">
          <div>User ID</div>
          <div><input id='user_id' type='text'></div>
        </div>
        <div class="col-lg-2">
          <div>Password</div>
          <div><input id='user_pwd' type='password'></div>
        </div>
        <div class="col-lg-2">
          <div>CID</div>
          <div><input id='user_cname' type='text'></div>
        </div>
        <div class="col-lg-2">
          <div>Domain</div>
          <div><input id='user_domain' type='text'></div>
        </div>
        <div class="col-lg-2">
          <div style="padding-top: 8px;">
            <a class='btn btn-primary' href="javascript: login()" id='login-btn'>Log in</a>
            <a class='btn btn-warning' href='javascript: logout()' id='logout-btn' style='display: none'>Log out</a>
          </div>
        </div>
      </div>


            <script src='./sansay/js/websbc-client.js'></script>
            <script src='./sansay/js/webphone-plugin.js'></script>
            <div class='row'>
                <div class='col-md-8'>
                    <div class='bs-docs-section'>
                        <p>
                            Sansay's Webphone is a WebRTC client that for Sansay's WebSBC. It is written as such that
                            it can work right out of the box with very little coding, at the same time offer the
                            flexibility such that developers can customerize it to their own needs.
                        </p>
                        <p>
                            At the high level Sansay Webphone provides a very easy to use JQuery plugin API. By using
                            JQuery plugin, web developers can get a webphone running in no time with only a few lines
                            of Javascript codes. While JQuery plugin is the easy way to implement a webphone, it just
                            implements the basic functionalities and a plain UI that may not be suitable nor is it
                            desirable for users of all levels. Sansay Webphone also exposes a lower level APIs that
                            provide supports for all functions needed to implement a full-feature, real-time communication application.
                        </p>
                        <p>
                            The following sections should provide enough detail information for developing a WebRTC
                            webphone at the two level mentioned above.
                        </p>

                        <br>

                        <ul class="nav nav-tabs" role="tablist">
                            <li class="nav-item active">
                                <a class="nav-link" data-toggle="tab" href="#jquery-api">Quick Start Guide</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#advanced-api">Plugin API &amp; Customization</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#advanced-api">WebSBC Call Engine API</a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active" id="jquery-api" role="tabpanel">
                                <br>
                                <h3 class="sansay-h3-style">Out-Of-The-Box Quick Start</h3>
                                Sansay Webphone JQuery plugin provides a very easy to use API for web developers. The followings are
                                required and must be included by the page that contains the Sansay Webphone.
                                <ul style='padding: 10px; font-size: 15px'>
                                    <li><b>JQuery</b> (version 1.7.2 or later)</li>
                                    <li><b>Bootstrap</b> (version 3.0 or later)</li>
                                    <li>
                                        <b>Sansay WebSBC client engine:</b> websbc-client.js. Delivered as part of the SDK under sansay/js directory
                                    </li>
                                    <li>
                                        <b>Sansay Webphone plugin:</b> webphone-plugin.js. Delivered as part of the SDK under sansay/js direcotry
                                    </li>
                                </ul>
                                All one needs is a &lt;div&gt; as container where you want the webphone's keypad to be located on your page
                                <div class='bs-example' style='margin-top: 15px;'>
                                    <pre><code>&lt;div id=&quot;my-example-container&quot;&gt;&lt;/div&gt;</code></pre>
                                </div>
                                <br>
                                Then initialize the plugin in the container when the document is ready.
                                <div class='bs-example' style='margin-top: 15px;'>
                                    <pre><code>$(document).ready(function() {&#x000A;  $(&quot;#my-example-container&quot;).webphone(&quot;websbc.example.com&quot;);&#x000A;  ...&#x000A;});</code></pre>
                                    <br>
                                    where
                                    <div style='margin: 10px;'>
                                        <p style='margin:0; padding: 0'><b>websbc.example.com</b> is the domain name of your WebSBC server</p>
                                    </div>
                                </div>
                                <br>
                                To activate webphone invoke login() with the valid credentials.
                                <div class='bs-example' style='margin-top: 15px;'>
                                    <pre><code>$(&quot;#my-example-container&quot;).webphone.login(&quot;5551000&quot;, &quot;abcd1234&quot;, &quot;Joe Blow&quot;, &quot;common&quot;);</code></pre>
                                    <br>
                                    where
                                    <div style='margin: 10px;'>
                                        <p style='margin:0; padding: 0'>"5551000" is the SIP user</p>
                                        <p style='margin:0; padding: 0'>"abcd1234" is the SIP password</p>
                                        <p style='margin:0; padding: 0'>"Joe Blow" is the Caller ID</p>
                                        <p style='margin:0; padding: 0'>"common" is the domain that the user belongs to in the WebSBC server</p>
                                    </div>
                                    <div style='margin: 10px;'>
                                        The login() function also takes two optional callback functions for successful login and logout handling.
                                        Please consult the <b>Plugin API</b> tab above or the example in the SDK package for more detail usage.
                                    </div>
                                    <div class='alert alert-danger' style="margin-top: 20px;">
                                        It is recommended that SIP user and password information should
                                        <b>not</b>
                                        be hardcoded
                                        in the javascript code. Use AJAX or other mechanism to obtain this information
                                        at runtime before invoking login().
                                        <br>
                                        <br>
                                        The example demo on the left obtain SIP user and password information from
                                        the user inputs.
                                    </div>
                                </div>
                                <br>
                                Invoke logout() to deactivate webphone
                                <div class='bs-example' style='margin-top: 15px;'>
                                    <pre><code>$(&quot;#my-example-container&quot;).webphone.logout();</code></pre>
                                </div>
                                <br>
                            </div>
                            <div class="tab-pane" id="advanced-api" role="tabpanel">
                                <br>
                                <hr class="thin-margin">
                                <h3 class="sansay-h3-style">Installation</h3>
                                <hr class="thin-margin">
                                <div id="text1" style="margin: 15px;">
                                    Begin by clicking “Download SDK” above. Extract the contents of the Zip and then copy all of the content in the 'sansay' directory to the 'Root' directory of your web server.
                                </div>
                                <br>
                                <hr class="thin-margin">
                                <h3 class="sansay-h3-style">Dependencies</h3>
                                <hr class="thin-margin">
                                <div id="text2" style="margin: 15px;">
                                    <ul style='padding: 10px; font-size: 15px'>
                                        <li style="padding: 8px;"><b>JQuery</b> (version 1.7.2 or later)</li>
                                        <li style="padding: 8px;"><b>Bootstrap</b> (version 3.0 or later)</li>
                                    </ul>
                                </div>
                                <hr class="thin-margin">
                                <h3 class="sansay-h3-style">Create A Webphone-Enabled Web Page</h3>
                                <hr class="thin-margin">
                                <div id="text3" style="margin: 15px;">
                                    Along with the CSS and JS files needed for JQuery and Bootstrap as mentioned above, the following JS files must also be included on your 'Webphone-Enabled' web page.
                                    <ul style='padding: 10px; font-size: 15px'>
                                        <li style="padding: 8px;">
                                            <b>Sansay WebSBC client engine:</b> sansay/js/websbc-client.js  -  Delivered as part of the SDK.
                                        </li>
                                        <li style="padding: 8px;">
                                            <b>Sansay Webphone plugin:</b> sansay/js/webphone-plugin.js  -  Delivered as part of the SDK.
                                        </li>
                                    </ul>
                                    On your web page, create a div with “class='container'”.
                                    This is the container where the webphone will live
                                    <div class='bs-example' style='margin-top: 15px;'>
                                        <pre><code>&lt;div id=&quot;my-phone&quot; class=&quot;container&quot;&gt;&lt;/div&gt;</code></pre>
                                    </div>
                                    <br>
                                    You will need to instantiate the webphone-plugin when the page is ready. A domain name with a legitimate SSL certificate is required for this step. Below is a code snippet that demonstrates how to instantiate the webphone-plugin:
                                    <div class='bs-example' style='margin-top: 25px;'>
                                        <pre><code>$(document).ready(function() {&#x000A;  $(&quot;#my-phone&quot;).webphone(&quot;websbc.example.com&quot;);&#x000A;  ...&#x000A;});</code></pre>
                                    </div>
                                    <br>
                                    OR optionally, to customize the look-and-feel with more 'options':
                                    <br>
                                    <div class='bs-example' style='margin-top: 25px;'>
                                        <pre><code>$(document).ready(function() {&#x000A;  $(&quot;#my-phone&quot;).webphone(&quot;websbc.example.com&quot;, options);&#x000A;  ...&#x000A;});</code></pre>
                                        <br>
                                        <b>**The look-and-feel customization will be covered in a later section.**</b>
                                        <br>
                                    </div>
                                    <br>
                                    For most applications where, by logging into the website, users are authorized to use the webphone, the parameters required to login the webphone to the WebSBC should also be available (We recommend using an AJAX call to acquire credentials at runtime instead of hard-coding them on the web page).
                                    <br>
                                    <div class='bs-example' style='margin-top: 15px;'>
                                        <pre><code>$(&quot;#my-phone&quot;).webphone.login(user_sip_id, user_sip_password, user_caller_id, user_domain);</code></pre>
                                        <br>
                                        <div style="margin: 0 auto; height: 90%; width: 90%; border-style: solid; border-color: '#fac599'; border-width: 2px;">
                                            <hr class="thin-margin">
                                            <h4 class="sansay-heading-color" style="margin: 6px;">Definitions</h4>
                                            <hr class="thin-margin">
                                            <div style='margin: 10px;'>
                                                <p style='margin:8px; padding: 0'><b>user_sip_id</b> – User ID for SIP authentication.</p>
                                                <p style='margin:8px; padding: 0'><b>user_sip_password</b> – User Password for SIP authentication.</p>
                                                <p style='margin:8px; padding: 0'><b>user_caller_id</b> – Input for caller ID.</p>
                                                <p style='margin:8px; padding: 0'><b>user_domain</b> – Fully Qualified Domain Name(<b>FQDN</b>) of WebSBC User is bing registered to. Field is required as part of authentication for WebSBC if such is configured.</p>
                                            </div>
                                        </div>
                                        <br>
                                        <div style='margin: 10px;'>
                                            In addition to the parameters listed above, login() accepts two optional callback functions as follows:
                                            <br><br>
                                        <pre><code>$(&quot;#my-phone&quot;).webphone.login(user_sip_id, user_sip_password, user_caller_id, user_domain, service_active, service_inactive);</code></pre>
                                        <br>
                                        <p><b>service_active</b> and <b>service_inactive</b> are callbacks that will be invoked in the event of phone service becoming available or unavailable, respectively. Typically, these callbacks trigger UI change to further notify the users of their webphone's service availability.</p>
                                    </div>
                                </div>
                            </div>
                                <br><br>
                                <hr class="thin-margin">
                                <h3 class="sansay-h3-style">Out-Of-The-Box Customization</h3>
                                <hr class="thin-margin">
                                <div id="text4" style="margin: 15px;">
                                    The webphone-plugin can be further customized by the 'options' parameter. The following are the customizable options:
                                    <br><br>
                                    <div style="margin: 0 auto; height: 90%; width: 90%; border-style: solid; border-color: '#fac599'; border-width: 2px;">
                                        <hr class="thin-margin">
                                        <h4 class="sansay-heading-color" style="margin: 6px;">Definitions</h4>
                                        <hr class="thin-margin">

                                        <p style='margin:8px; padding: 0'><b>theme</b> – A 'dark' and 'light' theme are provided in the SDK. 'dark' is the default theme if none is specified.</p>
                                        <p style='margin:8px; padding: 0'><b>position</b> – The webphone can be positioned on the 'left' or 'right' side of the screen. 'right' is default position if none is specified.</p>
                                        <p style='margin:8px; padding: 0'><b>ring_tone</b> – Sansay's webphone comes with a default ringtone. This is the ringtone for incoming calls. Users can customize by pointing this to a different ringtone(.wav) file.</p>
                                        <p style='margin:8px; padding: 0'><b>logo</b> – The webphone shows a Sansay logo on its upper left hand corner. This option allows users to change the logo to their own by pointing this to a different logo file.</p>
                                    </div>
                                    <br>
                                    Example:
                                    <br>
                                    <div style='margin: 10px;'>
                                        <pre><code>$(&quot;#my-phone&quot;).webphone.login(&quot;websbc.example.com&quot;, {theme: &#39;light&#39;, postition: &#39;left&#39;, ring_tone: &#39;my-file-path/my-ring-tone.wav&#39;, logo: &#39;my-logo-path/my-logo.png&#39;});</code></pre>
                                    </div>
                                </div>
                                <br><br>
                                <hr class="thin-margin">
                                <h3 class="sansay-h3-style">Advanced UI Customization</h3>
                                <hr class="thin-margin">
                                <div id="text5" style="margin: 15px;">
                                    Though the Sansay webphone already provides some level of customization, users are welcome to design their own 'skin' for the webphone. In the SDK, you may find the HTML and CSS files that can be modified.
                                    <br>
                                    The following shows their locations:
                                    <br><br>
                                    <pre>
      <b>sansay/</b>
      |---- webphone-plugin.html
      |---- <b>css/</b>
        |---- webphone-dark.css
        |---- webphone-light.css
    </pre>
                                    <br>
                                    <b>'webphone-plugin.html'</b> contains the 'skin' and the CSS files define the other attributes such as colors, fonts and sizes(height and width). As long as the CSS class name and the DOM IDs used in those files are not modified, the webphone should work.

                                    <br><br>

                                    If you take a closer look at the 'webphone-plugin.html' file you may find that it has FOUR 'primary' sections:

                                    <ul style="margin: 10px;">
                                        <li> <b>webphone-icon</b></li>
                                        <li> <b>webphone-incoming-call</b></li>
                                        <li> <b>webphone-video</b></li>
                                        <li> <b>webphone-keypad</b></li>
                                    </ul>
                                    <br><br>

                                    These sections are defined below:
                                    <div id="text" style="margin: 15px;">
                                    <div style="margin: 0 auto; height: 90%; width: 90%; border-style: solid; border-color: '#fac599'; border-width: 2px;">
                                        <hr class="thin-margin">
                                        <h4 class="sansay-heading-color" style="margin: 6px;">Definitions</h4>
                                        <hr class="thin-margin">

                                        <p style='margin:8px; padding: 0'><b>webphone-icon</b> – This contains the status icon that will be shown or hidden based on the status of the phone, i.e. whether it's logged in and active, or not.</p>
                                        <p style='margin:8px; padding: 0'><b>webphone-incoming-call</b> – This is the panel that is shown when there is a incoming 	call to prompt the user to either 'Answer' or 'Reject' the call.</p>
                                        <p style='margin:8px; padding: 0'><b>webphone-video</b> – This panel is used for video calls.</p>
                                        <p style='margin:8px; padding: 0'><b>webphone-keypad</b> – This is the panel where the keypad is defined.</p>
                                    </div>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div class="col-md-4">
                  <img src="img/api5.png" alt="API">
        	</div>
            </div>
            <script>
        window.onload = function() {
	      //$('#user_domain').val('webphone-agent.nobelbiz.com')
	      $('#user_domain').val('venice-domain-cs2')
          $('#quick-start').load("sansay/docs/webphone-quick-start-guide.html");
          $('#plugin-api').load("sansay/docs/webphone-plugin-api.html");

          $('#my-container').webphone(["webrtc.ringplan.com:443"]);

          var uname, pass, cname, domain;
          console.log(uname = getCookie("user_id"));
          console.log(pass = getCookie("secret"));
          console.log(cname = getCookie("cname"));
          console.log(domain = getCookie("domain"));

          if (window.location.search.length > 1
				  && window.location.search.toLowerCase().indexOf('user=') > -1
				  && window.location.search.toLowerCase().indexOf('pass=') > -1) {
			var query_params = window.location.search.split('&')
			for (var i = 0; i < query_params.length; i++) {
			  if (query_params[i].toLowerCase().indexOf('user=') > -1) {
				uname = query_params[i].split('=')[1];
			  }
			  else if (query_params[i].toLowerCase().indexOf('pass=') > -1) {
				pass = query_params[i].split('=')[1];
			  }
			  else if (query_params[i].toLowerCase().indexOf('cname=') > -1) {
				cname = query_params[i].split('=')[1].replace('%20', ' ');
			  }
			  else if (query_params[i].toLowerCase().indexOf('domain=') > -1) {
				domain = query_params[i].split('=')[1];
			  }
			}
   
		  }
		  if (uname.length > 1 && pass.length > 1){
		    $('#user_id').val(uname);
		    $('#user_pwd').val(pass);
		    $('#user_cname').val(cname);
		    $('#user_domain').val(domain);
		    setTimeout(login(), 500);
		  }
		  

          //$('#my-container').webphone("8-38-53-47.sansay.com", {/*logo: "assets/futaris-logo.png",*/ position: "left", theme: "light"});
        };

        function login() {
          var user = $('#user_id').val();
          var pwd = $('#user_pwd').val();
          var cname = $('#user_cname').val();
          var domain = $('#user_domain').val();
          if (domain.length > 0)
            $('#my-container').webphone.login(user, pwd, cname, domain, function() {
              $('#login-btn').hide();
              $('#logout-btn').show();
              $('#login-msg').hide();
            },
            function() {
              $('#logout-btn').hide();
              $('#login-btn').show();
              //alert("Disconnected from server");
              $('#login-msg').show();
            });
          else
            $('#my-container').webphone.login(user, pwd, cname);
        }

        function logout() {
          $('#my-container').webphone.logout();
          //$('#logout-btn').hide();
          //$('#login-btn').show();
        }
      </script>
      <hr>

      <div class="footer">
      </div>
    </div>
  </body>
</html>
